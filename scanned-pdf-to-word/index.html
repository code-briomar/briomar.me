<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>Display Markdown</title>

  <!-- Icons -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <!-- Markdown-it -->
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.0.0/dist/markdown-it.min.js"></script>

  <!-- Fonts -->
  <link rel="preload" href="../fonts/8cccbd218c3572d3-s.p.ttf" as="font" crossorigin type="font/ttf" />
  <link rel="preload" href="../fonts/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin type="font/woff2" />
  <link rel="preload" href="../fonts/ee43fef3c761122d-s.p.ttf" as="font" crossorigin type="font/ttf" />

  <!-- Markdown styles -->
  <link rel="stylesheet" href="../markdown.css" />
</head>

<body class="dark-mode">

  <a href="../">Home</a>

  <button class="toggle-container" id="darkModeToggle">
    <img id="toggle-button-img"
         src="../images/sun.png"
         alt="toggle"
         width="30"
         height="30" />
  </button>

  <main id="md-content"></main>

  <script>
    // Dark mode toggle
    const toggle = document.getElementById("darkModeToggle");
    const toggleButton = document.getElementById("toggle-button-img");

    toggle.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      toggleButton.src = document.body.classList.contains("dark-mode")
        ? "../images/moon.png"
        : "../images/sun.png";
    });

    // Markdown-it instance (SAFE + ROBUST)
    const md = window.markdownit({
      html: false,        // â›” prevents raw HTML from breaking DOM
      linkify: true,
      typographer: true,
      breaks: false
    });

    // Load and render Markdown
    fetch("ScannedPDF-to-Word.md")
      .then(res => {
        if (!res.ok) throw new Error("Failed to load markdown");
        return res.text();
      })
      .then(text => {
        document.getElementById("md-content").innerHTML = md.render(text);
      })
      .catch(err => {
        document.getElementById("md-content").innerHTML =
          "<p style='color:red'>Error loading markdown.</p>";
        console.error(err);
      });
  </script>

</body>
</html>
